{namespace neos=Neos\Neos\ViewHelpers}

<ul class="vertical menu" data-accordion-menu>
    <f:for each="{items}" as="item">
        <f:comment>
            No links on level 1
            instead go directly to level 2
        </f:comment>
        <f:if condition="{item.subItems}">
            <f:render section="submenu" arguments="{items: item.subItems, parentarea: item.property.area}"></f:render>
        </f:if>
    </f:for>
</ul>

<f:section name="submenu">
    <f:if condition="{level}"><ul class="menu vertical nested"></f:if>
    <f:for each="{items}" as="item">
        <f:comment>
            Since shortcuts can not have areas themselves we llokup the area of the parent instead
        </f:comment>
        <li class="{f:if(condition: item.property.area, then: item.property.area, else: parentarea)}">
            <neos:link.node node="{item.node}" />
            <f:if condition="{item.subItems}">
                <f:render section="submenu" arguments="{items: item.subItems, level: 1}"></f:render>
            </f:if>
        </li>
    </f:for>
    <f:if condition="{level}"></ul></f:if>
</f:section>
